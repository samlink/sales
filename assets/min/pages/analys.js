import{notifier}from"../parts/notifier.mjs";import{SPLITER}from"../parts/tools.mjs";document.querySelector("#statics .nav-icon").classList.add("show-chosed"),document.querySelector("#statics .menu-text").classList.add("show-chosed"),laydate.render({elem:"#search-date1",showBottom:!1}),laydate.render({elem:"#search-date2",showBottom:!1}),table_resize(document.querySelector(".table-container table"));let today_button=document.querySelector("#today-button");function fetch_data(data){fetch(`/${code}/fetch_analys`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then((response=>response.json())).then((content=>{if(-1!=content){let rows="";for(let record of content){let row="<tr>",document=record.split(SPLITER);for(let d of document)d=0==d?"":d,row+=`<td>${d}</td>`;row+="</tr>",rows+=row}document.querySelector(".table-container tbody").innerHTML=rows}else notifier.show("无操作权限","danger")}))}document.querySelector("#serach-button").addEventListener("click",(function(){let date1=document.querySelector("#search-date1").value,date2=document.querySelector("#search-date2").value;date1&&date2?(document.querySelector(".customer-name").textContent=`日期：${date1} 至 ${date2}`,fetch_data({date1:date1,date2:date2})):notifier.show("请输入起止日期","danger")})),today_button.addEventListener("click",(function(){document.querySelector(".customer-name").textContent="今日";let da=new Date(Date.now());fetch_data({date1:da.toLocaleDateString(),date2:da.toLocaleDateString()})})),today_button.click();